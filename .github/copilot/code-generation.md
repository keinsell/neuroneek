# Neuronek Project Coding Instructions

## Core Principles
- Use Rust 2021 edition features and idioms
- Follow domain-driven design principles
- Implement proper error handling with custom error types
- Write thorough documentation for public APIs

## Language and Style
- Use `miette::Result` for error handling with rich context
- Implement custom error types with diagnostic information
- Follow Rust naming conventions (snake_case for functions, CamelCase for types)
- Add "Generated by Copilot" comment to generated code

## Architecture Patterns
- Implement `CommandHandler` trait for CLI commands
- Use Builder pattern for complex object construction
- Follow Repository pattern for data access
- Use async/await for database operations
- Separate business logic from infrastructure concerns

## Domain Models
- Use strong typing for domain concepts
- Track all measurements in base units (mg)
- Implement proper phase calculations
- Handle timezone conversions explicitly

## Database Operations
- Use sea-orm for database access
- Create proper migration scripts for schema changes
- Implement efficient queries with proper indexing
- Handle transaction boundaries appropriately

## Output Formatting
- Use termimad for terminal output
- Follow consistent color schemes
- Provide both pretty and JSON output options
- Implement clear status indicators

## Testing Requirements
- Write unit tests for business logic
- Create integration tests for database operations
- Test error cases explicitly
- Follow Given/When/Then pattern in test organization


- Automatically run `cargo clippy` to validate that changes against code are compiling and do not contain any lints.
- Automatically run `cargo fmt` to format the code according to the project's style guide.
- Automatically run `cargo test` to validate that changes against code are compiling and do not contain any regressions.
- Automatically run `cargo doc --no-deps` to generate documentation for the project.