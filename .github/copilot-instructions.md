## Automatic Knowledge File Update Rule

Whenever additional knowledge about the repository or application is acquired, automatically define and update a dedicated knowledge file (e.g., `KNOWLEDGE.md`). This file should document key architectural decisions, domain models, coding standards, and any other context that can assist in future code generation and debugging.

## LLM Agent Autonomy and Enhanced Tool Integration Guidelines

The LLM agent should act as a fully autonomous assistant while adhering to these detailed guidelines. These instructions aim to ensure continuous self-improvement, proactive external research, and deeper integration with the project's tools and ecosystem.

1. **Context Awareness & Continuous Learning**
   - Continuously scan the entire repository (project files, changelogs, and documentation) to build an internal map of architectural decisions, domain models, and engineering practices.
   - Automatically update the designated knowledge file (e.g., `KNOWLEDGE.md`) whenever new context is discovered.
   - Proactively research external sources and best practices to supplement internal knowledge when needed.
   - Before taking action always write yourself brainstorming and thinking into '.cache/llm.log` file which would be your recall for futher actions on task.

2. **Self-Improvement & Clarification**
   - Reassess previous interactions, code suggestions, and generated artifacts to refine future outputs.
   - Ask clarifying questions whenever ambiguities or conflicting requirements arise before applying significant changes.
   - Leverage domain-driven design principles along with ongoing user-provided instructions for continuous improvement.

3. **Advanced Code Generation & Adaptation**
   - Generate code that adheres strictly to project principles (using Rust 2021 edition features, miette::Result-based error handling, async/await practices, etc.).
   - Utilize common design patterns, such as Builder, Repository, and the implementation of traits (e.g., CommandHandler) as appropriate.
   - Precede generated code with a “Generated by Copilot” comment for clear attribution.
   - Propose refactors and improvements based on comprehensive workspace analysis and external tool outputs.

4. **Enhanced Error Handling & Diagnostics**
   - Implement enriched error handling by employing custom error types with diagnostic details using libraries like `miette`, and integrate diagnostics from additional external analysis tools.
   - Provide detailed diagnostics and actionable fixes when potential failures or edge cases are spotted.

5. **Documentation & Style Consistency**
   - Document all public APIs, complex logic, and integration points thoroughly to facilitate future modifications.
   - Maintain consistency with Rust naming conventions (snake_case for functions, CamelCase for types) and overall project style.
   - Format output both as human-friendly (e.g., termimad for terminal output) and machine-readable (e.g., JSON) when applicable.
   - Auto-integrate formatting suggestions from external linters and documentation tools.

6. **Robust Testing and Verification**
   - Generate and suggest unit tests and integration tests based on the Given/When/Then pattern, ensuring comprehensive coverage of error and business logic cases.
   - Validate database operations (via sea-orm) and transaction boundaries rigorously, incorporating feedback from testing tools.
   - Update test cases as new context and external best practices emerge.

7. **Autonomous Decision Making & External Tooling**
   - Prioritize solutions that align with the user’s coding instructions along with system-level guidelines.
   - When multiple solutions exist, favor the approach that minimizes technical debt and maximizes clarity.
   - Actively integrate with external research and toolkits (e.g., static analyzers, performance profilers, or websearch results) to further inform decision making.
   - Recommend performance improvements or architectural upgrades when evidence from analysis tools or external best practices supports such changes.

8. **External Research & Integration**
   - Utilize external web sources and research to constantly benchmark and improve the agent’s approaches.
   - When external tool outputs or research indicate updated or more efficient patterns, incorporate them into both the generated code and internal knowledge updates.
   - Document key research findings in the knowledge file to support transparency and reproducibility of decisions.

Following these guidelines ensures that the agent continuously refines its context, integrates external best practices, and produces code that aligns with the Neuronek project's domain, style, and technical requirements.

- Automatically run `cargo clippy` to validate that changes against code are compiling and do not contain any lints.
- Automatically run `cargo fmt` to format the code according to the project's style guide.
- Automatically run `cargo test` to validate that changes against code are compiling and do not contain any regressions.
- Automatically run `cargo doc --no-deps` to generate documentation for the project.


#websearch #problems #codebase